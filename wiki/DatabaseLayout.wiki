#Possible DB Layout

{{{
 CREATE TABLE `STSS`.`User` (
`userID` INT NOT NULL ,
`email` VARCHAR( 40 ) NOT NULL ,
`firstname` VARCHAR( 40 ) NOT NULL ,
`lastname` VARCHAR( 40 ) NOT NULL ,
`role` TINYINT NOT NULL ,
`lastlogin` DATE NOT NULL
) ENGINE = InnoDB 

 CREATE TABLE `STSS`.`events` (
`eventID` INT NOT NULL ,
`name` VARCHAR( 40 ) NOT NULL ,
`date` DATE NOT NULL
) ENGINE = InnoDB 

 CREATE TABLE `STSS`.`seats` (
`eventID` INT NOT NULL ,
`category` VARCHAR( 40 ) NOT NULL ,
`price` FLOAT NOT NULL ,
`amount` INT NOT NULL
) ENGINE = InnoDB COMMENT = 'category is premium or normal' 

 CREATE TABLE `STSS`.`purchases` (
`eventID` INT NOT NULL ,
`userID` INT NOT NULL ,
`seatID` INT NOT NULL ,
`category` VARCHAR( 40 ) NOT NULL ,
`purchaseDate` DATETIME NOT NULL
) ENGINE = InnoDB;

 CREATE TABLE `stss`.`pwd` (
`userID` INT NOT NULL ,
`pwdHash` VARCHAR( 256 ) NOT NULL ,
`salt` VARCHAR( 128 ) NOT NULL
) ENGINE = InnoDB;

CREATE VIEW availableseats AS  SELECT purchases.eventID, purchases.category, seats.amount, COUNT( purchases.seatID ) AS sold
FROM seats, purchases
WHERE seats.eventID = purchases.eventID
AND seats.category = purchases.category
GROUP BY purchases.eventID, purchases.category;
}}}



